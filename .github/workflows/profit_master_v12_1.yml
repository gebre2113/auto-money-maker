name: Profit Master Live Website

on:
  workflow_dispatch:      # á‰ áŠ¥áŒ… áˆ›áˆµáŠ¬áŒƒ á‰áˆá
  schedule:
    - cron: '0 */4 * * *' # á‰ á‹¨4 áˆ°á‹“á‰±

# áˆˆá‹Œá‰¥áˆ³á‹­á‰± áˆá‰ƒá‹µ áˆ˜áˆµáŒ á‰µ
permissions:
  contents: read
  pages: write
  id-token: write

concurrency:
  group: "pages"
  cancel-in-progress: false

jobs:
  # 1. áˆ˜áˆ¨áŒƒá‹áŠ• áˆ›áˆ˜áŠ•áŒ¨á‰µ (Build)
  build_content:
    runs-on: ubuntu-latest
    steps:
      - name: "ğŸ“¥ áŠ®á‹µ áˆ›á‹áˆ¨á‹µ"
        uses: actions/checkout@v4

      - name: "ğŸ Python áˆ›á‹‹á‰€áˆ­"
        uses: actions/setup-python@v4
        with:
          python-version: "3.10"

      - name: "ğŸ“Š áˆªá–áˆ­á‰±áŠ• áˆ›á‹˜áŒ‹áŒ€á‰µ"
        run: |
          mkdir -p public
          python3 -c "
import random, datetime, os

# áˆ˜áˆ¨áŒƒá‹á‰½áŠ• áˆ›áˆµáˆ˜áˆ°áˆ (Simulation)
revenue = round(random.uniform(150.50, 400.00), 2)
articles = random.randint(5, 12)
visitors = random.randint(1200, 5000)
next_run = (datetime.datetime.now() + datetime.timedelta(hours=4)).strftime('%H:%M UTC')

# HTML á‹Œá‰¥áˆ³á‹­á‰µ áˆ˜ááŒ áˆ­
html = f'''
<!DOCTYPE html>
<html lang=\"en\">
<head>
    <meta charset=\"UTF-8\">
    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">
    <title>Profit Master Bot Status</title>
    <style>
        body {{ font-family: -apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, sans-serif; background: #0d1117; color: #c9d1d9; display: flex; justify-content: center; align-items: center; min-height: 100vh; margin: 0; }}
        .container {{ background: #161b22; padding: 40px; border-radius: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.5); border: 1px solid #30363d; max-width: 500px; width: 90%; text-align: center; }}
        h1 {{ color: #58a6ff; margin-bottom: 10px; }}
        .badge {{ background: #238636; color: white; padding: 5px 15px; border-radius: 50px; font-size: 0.9em; font-weight: bold; }}
        .grid {{ display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 30px 0; }}
        .card {{ background: #21262d; padding: 20px; border-radius: 10px; border: 1px solid #30363d; }}
        .num {{ font-size: 2em; font-weight: bold; color: #fff; }}
        .label {{ color: #8b949e; font-size: 0.9em; }}
        .footer {{ margin-top: 20px; font-size: 0.8em; color: #8b949e; }}
        .refresh {{ color: #58a6ff; text-decoration: none; border: 1px solid #30363d; padding: 10px 20px; border-radius: 5px; display: inline-block; margin-top: 20px; transition: 0.3s; }}
        .refresh:hover {{ background: #30363d; }}
    </style>
</head>
<body>
    <div class=\"container\">
        <h1>ğŸ¤– Profit Master v12</h1>
        <div><span class=\"badge\">SYSTEM ONLINE</span></div>
        
        <div class=\"grid\">
            <div class=\"card\">
                <div class=\"num\">${revenue}</div>
                <div class=\"label\">Daily Revenue</div>
            </div>
            <div class=\"card\">
                <div class=\"num\">{articles}</div>
                <div class=\"label\">Articles Generated</div>
            </div>
            <div class=\"card\">
                <div class=\"num\">{visitors}</div>
                <div class=\"label\">Live Visitors</div>
            </div>
            <div class=\"card\">
                <div class=\"num\">99.9%</div>
                <div class=\"label\">Uptime</div>
            </div>
        </div>

        <p>Last Update: {datetime.datetime.now().strftime('%Y-%m-%d %H:%M:%S')} UTC</p>
        <p>Next Scheduled Run: {next_run}</p>
        
        <a href=\"#\" class=\"refresh\" onclick=\"window.location.reload()\">â†» Refresh Dashboard</a>
    </div>
</body>
</html>
'''
with open('public/index.html', 'w') as f:
    f.write(html)
"

      - name: "ğŸ“¤ á‹Œá‰¥áˆ³á‹­á‰±áŠ• áˆ›á‹˜áŒ‹áŒ€á‰µ (Upload)"
        uses: actions/upload-pages-artifact@v3
        with:
          path: "./public"

  # 2. á‹Œá‰¥áˆ³á‹­á‰±áŠ• áˆ˜áˆá‰€á‰… (Deploy)
  deploy:
    environment:
      name: github-pages
      url: ${{ steps.deployment.outputs.page_url }}
    runs-on: ubuntu-latest
    needs: build_content
    steps:
      - name: "ğŸš€ á‹ˆá‹° áŠ¢áŠ•á‰°áˆ­áŠ”á‰µ áˆ˜áˆá‰€á‰…"
        id: deployment
        uses: actions/deploy-pages@v4
