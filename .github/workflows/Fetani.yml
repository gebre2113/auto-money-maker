name: ğŸ§ª Profit Master Engine - INDIVIDUAL TEST

on:
  workflow_dispatch: # á‰ áŠ¥áŒ…áˆ… "Run" áˆµá‰µáˆˆá‹ á‰¥á‰» áŠ¥áŠ•á‹²áˆ°áˆ«

jobs:
  test-engine:
    runs-on: ubuntu-latest
    
    steps:
      - name: ğŸ“¥ Checkout Code
        uses: actions/checkout@v4

      - name: ğŸ Setup Python
        uses: actions/setup-python@v5
        with:
          python-version: '3.10'

      - name: ğŸ“¦ Install Dependencies
        run: |
          pip install groq google-generativeai python-dotenv pydantic==1.10.11 jinja2 requests

      - name: ğŸ” Step 1: Syntax & Import Check
        run: |
          echo "Checking for syntax errors in profit_master_system.py..."
          python -m py_compile profit_master_system.py
          echo "Attempting to import the class..."
          python -c "from profit_master_system import ProfitMaster; print('âœ… Import Successful!')"

      - name: ğŸš€ Step 2: Functional Test (Content Generation)
        env:
          GROQ_API_KEY: ${{ secrets.GROQ_API_KEY }}
          GOOGLE_API_KEY: ${{ secrets.GOOGLE_API_KEY }}
        run: |
          # á‹­áˆ„ á‰µáŠ•áˆ½ á‹¨á“á‹­á‰°áŠ• áŠ®á‹µ á‹á‹­áˆ‰áŠ• á‰¥á‰»á‹áŠ• á‹«áˆµáŠáˆ³á‹áŠ“ áŠ áŠ•á‹µ áŒ½áˆá áŠ¥áŠ•á‹²á‹«áˆ˜áˆ­á‰µ á‹«á‹˜á‹‹áˆ
          python -c "
          import asyncio
          from profit_master_system import ProfitMaster
          
          async def test():
              engine = ProfitMaster()
              print('ğŸš€ Testing Content Generation...')
              result = await engine.generate_content('Test Topic: Future of AI 2026')
              if result and 'content' in result:
                  print('âœ… Generation Success!')
                  print(f'ğŸ“ Words produced: {len(result[\'content\'].split())}')
              else:
                  print('âŒ Generation Failed!')
                  exit(1)
          
          asyncio.run(test())
          "
