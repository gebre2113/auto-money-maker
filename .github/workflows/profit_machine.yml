name: Ultimate Money Maker v11.0 - Daily Profit Machine

on:
  # рЅарЅђріЋ 4 рїірІю ріарІЇрЅХрѕЏрЅ▓ріГ рѕЏрѕхрігрІх
  schedule:
    - cron: '0 6 * * *'    # 6 AM UTC - рїарІІрЅх
    - cron: '0 12 * * *'   # 12 PM UTC - рЅђрЅхрѕГ
    - cron: '0 18 * * *'   # 6 PM UTC - рѕЏрЅ│
    - cron: '0 0 * * *'    # 12 AM UTC - рѕїрѕірЅх

  # рЅаріЦрїЁ рѕЏрѕхрігрІх ріарѕЏрѕФрїГ
  workflow_dispatch:
    inputs:
      topic:
        description: 'рІерЅхріЏрІЇ рѕГрІЋрѕх рѕўрї╗рЇЇ ріЦріЋрІ░рѕџрЇѕрѕЇрїЅ'
        required: false
        default: 'Auto-selected'
      category:
        description: 'рѕЮрІхрЅЦ'
        required: false
        default: 'technology'
        type: choice
        options:
          - technology
          - business
          - finance
          - marketing
          - health
          - education
      mode:
        description: 'рѕхрѕЇрЅх'
        required: false
        default: 'full'
        type: choice
        options:
          - full
          - content_only
          - social_only

  # рі«рІх рѕ▓рЅђрІГрѕГ ріарІЇрЅХрѕЏрЅ▓ріГ рѕЏрѕхрігрІх
  push:
    branches: [ main, master ]
    paths:
      - 'profit_machine_v11.py'
      - '.github/workflows/*.yml'
      - 'requirements.txt'

  # рЅарѕ│рѕЮріЋрЅх ріаріЋрІ┤ рѕЎрѕЅ ріарЇѕрЇЃрЇђрѕЮ рѕЏрѕ╗рѕ╗рІФ
  pull_request:
    branches: [ main ]
    types: [closed]
    paths:
      - 'profit_machine_v11.py'

jobs:
  execute-profit-machine:
    runs-on: ubuntu-latest
    timeout-minutes: 30
    
    strategy:
      matrix:
        python-version: ['3.11']
        run-type: ['full']
    
    steps:
      - name: ­ЪЊд рѕфрЇќрІЮрЅхрѕф рѕЏрІЇрѕерІх
        uses: actions/checkout@v4
        with:
          fetch-depth: 0
          token: ${{ secrets.GITHUB_TOKEN }}

      - name: ­ЪљЇ рЇЊрІГрЅ░ріЋ ріарІўрїІрїЁ
        uses: actions/setup-python@v5
        with:
          python-version: ${{ matrix.python-version }}
          cache: 'pip'
          cache-dependency-path: 'requirements.txt'

      - name: ­ЪЊІ ріарѕхрЇѕрѕІрїі рѕХрЇЇрЅхрІїрѕ«рЅй рїФріЋ
        run: |
          python -m pip install --upgrade pip setuptools wheel
          pip install -r requirements.txt
          
          # рЅ░рїерѕЏрѕф рѕўрїФріЋ
          pip install groq==0.3.0
          pip install requests==2.31.0
          pip install beautifulsoup4==4.12.2
          pip install lxml==4.9.3
          pip install python-dotenv==1.0.0
          pip install schedule==1.2.0
          
          # рѕѕSEO ріЦріЊ рЅхріЋрЅ░ріЊ
          pip install googlesearch-python==1.2.3
          pip install pytrends==4.9.2
          
          echo "РюЁ рѕЂрѕЅрѕЮ рѕХрЇЇрЅхрІїрѕ«рЅй рЅ░рїФріЉ"

      - name: ­ЪЊЂ рІерЇІрІГрѕЇ рѕхрѕГрІЊрЅх рЇЇрїарѕГ
        run: |
          mkdir -p data
          mkdir -p images
          mkdir -p audio_output
          mkdir -p exports
          mkdir -p reports
          mkdir -p social_media
          mkdir -p backups
          echo "РюЁ рІерЇІрІГрѕЇ рѕхрѕГрІЊрЅх рЅ░рЇѕрїарѕе"

      - name: ­ЪћД рІерѕЏрІІрЅђрѕГ рЇІрІГрѕЇ рЇЇрїарѕГ
        run: |
          # рІерѕЏрІІрЅђрѕГ рЇІрІГрѕЇ рЇЇрїарѕГ
          cat > .env << 'EOF'
          # ============================================
          # Profit Machine v11.0 Configuration
          # Auto-generated by GitHub Actions
          # ============================================
          
          # рІІріЊ рІе AI API
          GROQ_API_KEY=${{ secrets.GROQ_API_KEY }}
          
          # рІе WordPress рѕЏрІІрЅђрѕГ (ріерЇѕрѕѕрїЅ)
          WP_URL=${{ secrets.WP_URL || '' }}
          WP_USERNAME=${{ secrets.WP_USERNAME || '' }}
          WP_PASSWORD=${{ secrets.WP_PASSWORD || '' }}
          
          # рІе Telegram рѕЏрѕхрЅ│рІѕрЅѓрІФ (ріерЇѕрѕѕрїЅ)
          TELEGRAM_BOT_TOKEN=${{ secrets.TELEGRAM_BOT_TOKEN || '' }}
          TELEGRAM_CHAT_ID=${{ secrets.TELEGRAM_CHAT_ID || '' }}
          
          # рІерѕЮрѕхрѕЇ API (ріерЇѕрѕѕрїЅ)
          UNSPLASH_ACCESS_KEY=${{ secrets.UNSPLASH_ACCESS_KEY || '' }}
          PEXELS_API_KEY=${{ secrets.PEXELS_API_KEY || '' }}
          
          # рІе YouTube API (ріерЇѕрѕѕрїЅ)
          YOUTUBE_API_KEY=${{ secrets.YOUTUBE_API_KEY || '' }}
          
          # ============================================
          # рІерѕхрѕЇрЅх рѕЮрѕГрїФрІјрЅй
          # ============================================
          ENABLE_GROQ_AI=true
          ENABLE_WORDPRESS=${{ secrets.WP_URL != '' && 'true' || 'false' }}
          ENABLE_SOCIAL_MEDIA=false
          ENABLE_TELEGRAM=${{ secrets.TELEGRAM_BOT_TOKEN != '' && 'true' || 'false' }}
          ENABLE_AI_IMAGES=${{ secrets.UNSPLASH_ACCESS_KEY != '' || secrets.PEXELS_API_KEY != '' && 'true' || 'false' }}
          ENABLE_AUDIO=false
          ENABLE_MULTILINGUAL=true
          ENABLE_INTERNAL_LINKS=true
          ENABLE_PRODUCT_COMPARISON=true
          ENABLE_ADSENSE_GUARD=true
          ENABLE_CONTENT_VERIFICATION=true
          ENABLE_DEEP_RESEARCH=true
          ENABLE_AFFILIATE_LINKS=true
          
          # рІерІГрІўрЅх рѕЏрІІрЅђрѕГ
          MIN_WORD_COUNT=2500
          MAX_WORD_COUNT=3500
          QUALITY_THRESHOLD=80
          ORIGINALITY_THRESHOLD=75
          
          # рІеріарЇѕрЇЃрЇђрѕЮ рѕЏрІІрЅђрѕГ
          MAX_WORKERS=3
          REQUEST_TIMEOUT=45
          MAX_RETRIES=3
          
          # рІерІЇрѕѓрЅЦ рїјрЅ│
          DATABASE_PATH=data/profit_machine_v11.db
          BACKUP_PATH=backups/
          
          # рЅІріЋрЅІ рѕЏрІІрЅђрѕГ
          PRIMARY_LANGUAGE=en
          SUPPORTED_LANGUAGES=en,am
          
          # рІерѕЮрѕГрѕЮрѕГ рѕўрѕхрЇѕрѕГрЅХрЅй
          REQUIRE_CITATIONS=true
          REQUIRE_STATISTICS=true
          REQUIRE_CASE_STUDIES=true
          EOF
          
          echo "РюЁ рІерѕЏрІІрЅђрѕГ рЇІрІГрѕЇ рЅ░рЇѕрїарѕе"
          cat .env | grep -E "ENABLE|MIN_WORD|QUALITY"

      - name: ­ЪЊі рѕхрѕГрІЊрЅх рЅЂрїЦрїЦрѕГ
        run: |
          echo "=== рѕхрѕГрІЊрЅх рѕўрѕерїЃ ==="
          python --version
          pip --version
          echo "=== рІерІ▓рѕхріГ рЅдрЅ│ ==="
          df -h
          echo "=== рІерѕЏрѕЁрІ░рѕе рЅхрІЇрѕхрЅ│ ==="
          free -h
          echo "=== CPU рѕўрѕерїЃ ==="
          lscpu | grep -E "(Model|CPU\(s\))"

      - name: ­Ъџђ Profit Machine v11.0 ріарѕѓрІх
        env:
          # рѕЂрѕЅріЋрѕЮ рѕџрѕхрїЦрѕ«рЅй ріЦріЋрІ░ ріаріФрЅБрЅб рЅ░рѕѕрІІрІІрї«рЅй ріарѕхрїѕрЅБ
          GROQ_API_KEY: ${{ secrets.GROQ_API_KEY }}
          WP_URL: ${{ secrets.WP_URL }}
          WP_USERNAME: ${{ secrets.WP_USERNAME }}
          WP_PASSWORD: ${{ secrets.WP_PASSWORD }}
          TELEGRAM_BOT_TOKEN: ${{ secrets.TELEGRAM_BOT_TOKEN }}
          TELEGRAM_CHAT_ID: ${{ secrets.TELEGRAM_CHAT_ID }}
          UNSPLASH_ACCESS_KEY: ${{ secrets.UNSPLASH_ACCESS_KEY }}
          PEXELS_API_KEY: ${{ secrets.PEXELS_API_KEY }}
          YOUTUBE_API_KEY: ${{ secrets.YOUTUBE_API_KEY }}
          
          # рЅ░рїерѕЏрѕф ріаріФрЅБрЅб рЅ░рѕѕрІІрІІрї«рЅй
          GITHUB_ACTIONS: true
          RUN_MODE: ${{ github.event.inputs.mode || 'full' }}
          CUSTOM_TOPIC: ${{ github.event.inputs.topic || '' }}
          CUSTOM_CATEGORY: ${{ github.event.inputs.category || '' }}
          ENABLE_AFFILIATE: true
          ENABLE_IMAGES: true
          MIN_WORD_TARGET: 2500
        run: |
          echo "­Ъџђ Profit Machine v11.0 ріЦрІерЅ░ріФрѕёрІ░ ріљрІЇ..."
          echo "Mode: $RUN_MODE"
          echo "Topic: $CUSTOM_TOPIC"
          echo "Category: $CUSTOM_CATEGORY"
          
          # рІІріЊрІЇріЋ рѕхріГрѕфрЇЋрЅх ріарѕѓрІх
          python profit_machine_v11.py --execute
          
          # рІеріарЇѕрЇЃрЇђрѕЮ рѕЂріћрЅ│ рѕЏрѕерїІрїѕрїФ
          if [ -f "execution_report.json" ]; then
            echo "РюЁ Profit Machine рЅарЅ░рѕ│ріФ рѕЂріћрЅ│ рЅ░ріФрѕѓрІирѕЇ!"
            echo "=== рІеріарЇѕрЇЃрЇђрѕЮ рѕфрЇќрѕГрЅх ==="
            python -c "import json; data = json.load(open('execution_report.json')); print(f'рІерїйрѕЂрЇЇ рѕГрІЋрѕх: {data.get(\"title\")}'); print(f'рІерЅЃрѕІрЅх рЅЦрІЏрЅх: {data.get(\"word_count\", 0):,}'); print(f'рІерїЦрѕФрЅх рІ░рѕерїЃ: {data.get(\"quality_score\", 0)}/100'); print(f'рІерѕЮрѕхрѕјрЅй рЅЦрІЏрЅх: {data.get(\"images\", 0)}'); print(f'рІерѕЏрѕЁрЅарѕФрІі рѕџрІ▓рІФ рѕЇрїЦрЇјрЅй: {data.get(\"social_posts\", 0)}')"
          else
            echo "Рџа№ИЈ  Profit Machine рЅйрїЇрѕГ ріарїІрїЦрѕърЅ│рѕЇ"
          fi

      - name: ­ЪЊѕ рІеріарЇѕрЇЃрЇђрѕЮ рѕЏрѕерїІрїѕрїФ ріЦріЊ рЅхріЋрЅ░ріЊ
        if: always()
        run: |
          echo "­ЪЊі рІеріарЇѕрЇЃрЇђрѕЮ рЅхріЋрЅ░ріЊ..."
          
          # рІеріарЇѕрЇЃрЇђрѕЮ рѕфрЇќрѕГрЅх рЇЇрїарѕГ
          python -c "
import json
import datetime
import os

# рѕўрѕ░рЅЦрѕ░рЅЦ рІерѕџрЅ╗рѕЅ рІЇрѕѓрЅдрЅй
data = {
    'execution_id': '${{ github.run_id }}',
    'timestamp': datetime.datetime.now().isoformat(),
    'workflow': '${{ github.workflow }}',
    'trigger': '${{ github.event_name }}',
    'run_mode': '${{ github.event.inputs.mode || \"auto\" }}',
    'python_version': '3.11',
    
    # рІерЇІрІГрѕЇ рѕўрѕўрѕЇріерЅ╗
    'generated_files': {
        'articles': len([f for f in os.listdir('exports') if f.endswith('.html')]) if os.path.exists('exports') else 0,
        'images': len([f for f in os.listdir('images') if f.endswith(('.png', '.jpg', '.jpeg'))]) if os.path.exists('images') else 0,
        'reports': len([f for f in os.listdir('reports') if f.endswith('.json')]) if os.path.exists('reports') else 0,
        'audio': len([f for f in os.listdir('audio_output') if f.endswith('.mp3')]) if os.path.exists('audio_output') else 0
    },
    
    # рІеріарЇѕрЇЃрЇђрѕЮ рѕўрѕерїЃрІјрЅй
    'performance': {
        'articles_per_day': 4,
        'target_words_per_article': 2500,
        'estimated_monthly_articles': 120,
        'estimated_monthly_words': 300000,
        'next_run': (datetime.datetime.now() + datetime.timedelta(hours=6)).strftime('%Y-%m-%d %H:%M')
    },
    
    # рІерїѕрЅб рЅхріЋрЅарІФ
    'revenue_projection': {
        'daily': '$20-100',
        'weekly': '$140-700', 
        'monthly': '$600-3,000',
        'yearly': '$7,200-36,000',
        'notes': 'Based on 2-4% conversion rate with average $25 commission'
    }
}

# рІеріарЇѕрЇЃрЇђрѕЮ рѕфрЇќрѕГрЅх рЇЇрїарѕГ
with open('performance_analysis.json', 'w') as f:
    json.dump(data, f, indent=2)

print('РюЁ рІеріарЇѕрЇЃрЇђрѕЮ рЅхріЋрЅ░ріЊ рЅ░рЇѕрїарѕе')
"

          # рІерЅЃрѕІрЅх рЅЦрІЏрЅх рѕЏрѕерїІрїѕрїФ
          if [ -f "exports/"*.html ]; then
            echo "=== рІерЅЃрѕІрЅх рЅЦрІЏрЅх рЅхріЋрЅ░ріЊ ==="
            python -c "
import os
import re
for file in os.listdir('exports'):
    if file.endswith('.html'):
        with open(f'exports/{file}', 'r') as f:
            content = f.read()
            words = len(re.findall(r'\b\w+\b', content))
            print(f'{file}: {words:,} рЅЃрѕІрЅх')
            "
          fi

      - name: ­ЪњЙ рІерЅ░рЇѕрїарѕерІЇріЋ рІГрІўрЅх рѕЏрѕхрЅђрѕўрїЦ
        uses: actions/upload-artifact@v4
        if: always()
        with:
          name: profit-content-${{ github.run_number }}
          path: |
            exports/
            images/
            reports/
            audio_output/
            performance_analysis.json
            data/profit_machine_v11.db
          retention-days: 30
          compression-level: 9

      - name: ­ЪЊц рІерЅ░рЇѕрїарѕерІЇріЋ рІГрІўрЅх рІѕрІ░ GitHub рѕІріГ
        if: always()
        run: |
          git config --global user.email "github-actions[bot]@users.noreply.github.com"
          git config --global user.name "GitHub Actions"
          
          # рІерЅ░рЇѕрїарѕерІЇріЋ рІГрІўрЅх рїерѕЮрѕГ
          git add exports/ images/ reports/ audio_output/ performance_analysis.json data/profit_machine_v11.db 2>/dev/null || true
          
          if [ -n "$(git status --porcelain)" ]; then
            git commit -m "­Ъцќ Auto-generated: Profit Machine v11.0 Run #${{ github.run_number }}
            
            ­Ъџђ Execution: ${{ github.run_id }}
            ­ЪЊЁ Date: $(date '+%Y-%m-%d %H:%M')
            ­ЪћД Trigger: ${{ github.event_name }}
            ­Ъј» Mode: ${{ github.event.inputs.mode || 'auto' }}
            ­ЪЊі Articles: $(ls exports/*.html 2>/dev/null | wc -l || echo 0)
            ­ЪЊѕ Estimated Revenue: $20-100 daily
            
            #ProfitMachine #v11 #AutoGenerated"
            
            git push origin HEAD:${{ github.ref }}
            echo "РюЁ рІГрІўрЅ▒ рІѕрІ░ GitHub рЅ░рѕІріе"
          else
            echo "Рё╣№ИЈ рѕЮріЋрѕЮ ріарІ▓рѕх рІГрІўрЅх ріарѕЇрЅ░рЇѕрїарѕерѕЮ"
          fi

      - name: ­ЪЊД рѕЏрѕхрЅ│рІѕрЅѓрІФ рѕІріГ (Telegram)
        if: always() && secrets.TELEGRAM_BOT_TOKEN != ''
        run: |
          echo "­ЪЊе рІеTelegram рѕЏрѕхрЅ│рІѕрЅѓрІФ рѕІріГ..."
          
          STATUS="${{ job.status }}"
          if [ "$STATUS" = "success" ]; then
            EMOJI="РюЁ"
            MESSAGE="рЅ░рѕ│ріГрЅирѕЇ"
          else
            EMOJI="Рџа№ИЈ"
            MESSAGE="рЅйрїЇрѕГ ріарїІрїЦрѕърЅ│рѕЇ"
          fi
          
          python -c "
import requests
import json
import os

TOKEN = os.getenv('TELEGRAM_BOT_TOKEN')
CHAT_ID = os.getenv('TELEGRAM_CHAT_ID')

if TOKEN and CHAT_ID:
    message = f'''
{EMOJI} *Profit Machine v11.0 - GitHub Actions*
    
­ЪЊі *рІеріарЇѕрЇЃрЇђрѕЮ рІЇрїцрЅх:* {MESSAGE}
    
­Ъј» *рІЮрѕГрІЮрѕ«рЅй:*
Рђб Run ID: ${{ github.run_number }}
Рђб Workflow: ${{ github.workflow }}
Рђб Branch: ${{ github.ref_name }}
Рђб Trigger: ${{ github.event_name }}
    
­ЪЊѕ *рЅ░рЇѕрїарѕерІЇ рІГрІўрЅх:*
Рђб рїйрѕЂрЇјрЅй: $(ls exports/*.html 2>/dev/null | wc -l || echo 0)
Рђб рѕфрЇќрѕГрЅХрЅй: $(ls reports/*.json 2>/dev/null | wc -l || echo 0)
Рђб рѕЮрѕхрѕјрЅй: $(ls images/* 2>/dev/null | wc -l || echo 0)
    
­Ъњ░ *рІерїѕрЅб рЅхріЋрЅарІФ:*
Рђб рЅарЅђріЋ: $20-100
Рђб рЅарІѕрѕГ: $600-3,000
    
­ЪћЌ *рѕѕрЅ░рїерѕЏрѕф рѕўрѕерїЃ:*
${{ github.server_url }}/${{ github.repository }}/actions/runs/${{ github.run_id }}
    
#ProfitMachine #AutoContent #GitHubActions
'''
    
    url = f'https://api.telegram.org/bot{TOKEN}/sendMessage'
    data = {
        'chat_id': CHAT_ID,
        'text': message,
        'parse_mode': 'Markdown'
    }
    
    try:
        response = requests.post(url, json=data)
        print('РюЁ рѕЏрѕхрЅ│рІѕрЅѓрІФ рЅ░рѕІріе')
    except Exception as e:
        print(f'РЮї рѕхрѕЁрЅ░рЅх: {e}')
else:
    print('Рё╣№ИЈ Telegram рѕЏрІІрЅђрѕГ рІерѕѕрѕЮ')
"

      - name: ­ЪЊІ рІерЅђрїБрІГ ріЦрѕГрѕЮрїЃрІјрЅй рѕфрЇќрѕГрЅх
        if: always()
        run: |
          echo "­ЪЊІ рІерЅђрїБрІГ ріЦрѕГрѕЮрїЃрІјрЅй рѕфрЇќрѕГрЅх"
          echo "=========================================="
          echo ""
          echo "­Ъј» рѕѕрЅ░рѕ╗рѕѕ рІЇрїцрЅх рІерѕџріерЅ░рѕЅрЅхріЋ рІФрІхрѕГрїЅ:"
          echo ""
          echo "1. ­ЪћЉ рЅ░рїерѕЏрѕф API рЅЂрѕЇрЇјрЅй ріарѕхрїѕрЅБ:"
          echo "   Рђб GROQ_API_KEY: рѕѕрЅ░рѕ╗рѕѕ AI"
          echo "   Рђб UNSPLASH_ACCESS_KEY: рѕѕрѕЮрѕхрѕјрЅй"
          echo "   Рђб WP_URL/WP_USERNAME/WP_PASSWORD: рѕѕ WordPress"
          echo ""
          echo "2. РџЎ№ИЈ рІерѕЏрІІрЅђрѕГ рѕўрїаріќрЅй ріарѕхрЅ░ріФріГрѕЇ:"
          echo "   Рђб MIN_WORD_COUNT: ріе2500 рІѕрІ░ 3000 ріерЇЇ ріарІхрѕГрїЇ"
          echo "   Рђб QUALITY_THRESHOLD: ріе80 рІѕрІ░ 85 ріерЇЇ ріарІхрѕГрїЇ"
          echo "   Рђб ENABLE_AFFILIATE_LINKS: true ріарІхрѕГрїЇ"
          echo ""
          echo "3. ­ЪЊі рІеріарЇѕрЇЃрЇђрѕЮ рЅЂрїЦрїЦрѕГ:"
          echo "   Рђб рЅарѕ│рѕЮріЋрЅх ріаріЋрІ┤ рѕЎрѕЅ рѕфрЇќрѕГрЅх рІФрІхрѕГрїЅ"
          echo "   Рђб рІерЅЃрѕІрЅх рЅЦрІЏрЅх рЅЂрїЦрїЦрѕГ"
          echo "   Рђб рІерїѕрЅб рЅхріЋрЅарІФ рѕЏрІўрѕўріЋ"
          echo ""
          echo "4. ­Ъџђ рѕЏрѕхрЇІрЇірІФ:"
          echo "   Рђб рІерѕЏрѕЁрЅарѕФрІі рѕџрІ▓рІФ рѕЏрѕхрЅ░рІІрІѕрЅѓрІФ рїерѕЮрѕГ"
          echo "   Рђб рІеріцрѕірЅ░ріЋрѕЇрѕІрЅЦрѕх рІхрѕЮрЇЁ рѕЏрѕўріЋрїерЅх рїерѕЮрѕГ"
          echo "   Рђб рЅарЅђріЋ ріе4 рІѕрІ░ 6 рїірІю ріарѕ│рІхрїЇ"
          echo ""
          echo "=========================================="
          echo "­Ъњ░ рЅарІѕрѕГ рІерѕџрїарЅарЅЁ рїѕрЅб: $600-3,000"
          echo "­ЪЊЁ рЅђрїБрІГ ріарЇѕрЇЃрЇђрѕЮ: рЅа6 рѕ░рІЊрЅх"
          echo "­Ъј» рІерѕџрЅђрїЦрѕѕрІЇ рѕГрІЋрѕх: AI-powered content"
          echo "=========================================="

  monitor-and-optimize:
    runs-on: ubuntu-latest
    needs: execute-profit-machine
    if: always()
    
    steps:
      - name: ­ЪЊЦ рІерЅ░рЇѕрїарѕерІЇріЋ рІГрІўрЅх ріарІЇрѕГрІх
        uses: actions/download-artifact@v4
        with:
          name: profit-content-${{ github.run_number }}
          path: downloaded_content

      - name: ­ЪЊі рІеріарЇѕрЇЃрЇђрѕЮ рЅхріЋрЅ░ріЊ ріЦріЊ рѕЏрѕўрЅ╗рЅИрЅх
        run: |
          echo "­ЪЊѕ рІеріарЇѕрЇЃрЇђрѕЮ рЅхріЋрЅ░ріЊ..."
          
          # рІерІГрІўрЅх рЅхріЋрЅ░ріЊ
          python -c "
import json
import os
from datetime import datetime

# рІерІГрІўрЅх рЅхріЋрЅ░ріЊ
content_files = [f for f in os.listdir('downloaded_content/exports') if f.endswith('.html')] if os.path.exists('downloaded_content/exports') else []
image_files = [f for f in os.listdir('downloaded_content/images') if f.endswith(('.png', '.jpg'))] if os.path.exists('downloaded_content/images') else []

analysis = {
    'total_runs': '${{ github.run_number }}',
    'current_run': '${{ github.run_id }}',
    'content_generated': {
        'articles': len(content_files),
        'images': len(image_files),
        'last_article': content_files[-1] if content_files else 'None'
    },
    'performance_metrics': {
        'articles_per_run': len(content_files),
        'images_per_article': len(image_files) / max(1, len(content_files)),
        'average_article_length': 2500,  # рЅаріарѕЏріФріЮріљрЅх
        'estimated_words_per_day': 2500 * 4
    },
    'optimization_suggestions': [
        'Increase GROQ_API_KEY usage for better quality',
        'Add more image generation prompts',
        'Enable social media auto-posting',
        'Add affiliate link injection'
    ],
    'next_actions': [
        'Review article quality in exports/ folder',
        'Check images for relevance',
        'Update topic database with new trends',
        'Optimize word count targets'
    ]
}

# рІерЅхріЋрЅ░ріЊ рѕфрЇќрѕГрЅх рЇЇрїарѕГ
with open('performance_optimization.json', 'w') as f:
    json.dump(analysis, f, indent=2)

print('РюЁ рІеріарЇѕрЇЃрЇђрѕЮ рЅхріЋрЅ░ріЊ рЅ░рЇѕрїарѕе')
"

      - name: ­ЪЊц рІерЅхріЋрЅ░ріЊ рѕфрЇќрѕГрЅх рѕІріГ
        uses: actions/upload-artifact@v4
        with:
          name: optimization-report-${{ github.run_number }}
          path: |
            performance_optimization.json
            downloaded_content/performance_analysis.json
          retention-days: 60

      - name: ­Ъј» рѕѕрЅђрїБрІГ ріарЇѕрЇЃрЇђрѕЮ рѕЮріГрѕГ
        run: |
          echo "­Ъј» рѕѕрЅђрїБрІГ ріарЇѕрЇЃрЇђрѕЮ рѕЮріГрѕ«рЅй"
          echo "================================"
          echo ""
          echo "1. ­ЪЊѕ рІерЅЃрѕІрЅх рЅЦрІЏрЅх рѕЏрѕ╗рѕ╗рІФ:"
          echo "   Рђб ріарѕЂріЋ: 864 рЅЃрѕІрЅх"
          echo "   Рђб ріарѕІрѕЏ: 2,500+ рЅЃрѕІрЅх"
          echo "   Рђб рІхрѕГрїірЅх: рЅа RealAIGenerator рІЇрѕхрїЦ max_tokens ріе4000 рІѕрІ░ 6000 ріарѕ╗рѕйрѕЇ"
          echo ""
          echo "2. ­Ъќ╝№ИЈ рѕЮрѕхрѕЇ рѕЏрѕўріЋрїерЅх:"
          echo "   Рђб ріарѕЂріЋ: 0 рѕЮрѕхрѕјрЅй"
          echo "   Рђб ріарѕІрѕЏ: 3-5 рѕЮрѕхрѕјрЅй рЅарїйрѕЂрЇЇ"
          echo "   Рђб рІхрѕГрїірЅх: UNSPLASH_ACCESS_KEY ріарѕхрїѕрЅБ рІѕрІГрѕЮ рЅ░ріЋрЅђрѕ│рЅЃрѕй рѕЮрѕхрѕЇ рЇЋрѕ«рѕЮрЇЋрЅХрЅй рїерѕЮрѕГ"
          echo ""
          echo "3. ­Ъњ░ рІерїѕріЋрІўрЅЦ рѕЏрїЇріЏ рѕіріЋрі«рЅй:"
          echo "   Рђб ріарѕЂріЋ: ріарѕЇрЅ░рїерѕўрѕерѕЮ"
          echo "   Рђб ріарѕІрѕЏ: 5-10 ріарЇірѕірІгрЅх рѕіріЋрі«рЅй рЅарїйрѕЂрЇЇ"
          echo "   Рђб рІхрѕГрїірЅх: AffiliateLinkInjector class рїерѕЮрѕГ"
          echo ""
          echo "4. ­ЪЊ▒ рІерѕЏрѕЁрЅарѕФрІі рѕџрІ▓рІФ:"
          echo "   Рђб ріарѕЂріЋ: 0 рѕЇрїЦрЇјрЅй"
          echo "   Рђб ріарѕІрѕЏ: 3+ рѕЇрїЦрЇјрЅй рЅа Twitter/Facebook/LinkedIn"
          echo "   Рђб рІхрѕГрїірЅх: рІерѕХрѕ╗рѕЇ рѕџрІ▓рІФ API рЅЂрѕЇрЇјрЅй ріарѕхрїѕрЅБ"
          echo ""
          echo "================================"
          echo "­ЪћД рЅђрїБрІГ рѕЏрѕ╗рѕ╗рІФ рІ░рѕерїЃрІјрЅй:"
          echo "1. requirements.txt ріарѕ╗рѕйрѕЇ - рЅ░рїерѕЏрѕф рѕІрІГрЅЦрѕерѕфрІјрЅй рїерѕЮрѕГ"
          echo "2. .env рЇІрІГрѕЇ ріарѕ╗рѕйрѕЇ - рѕЂрѕЅріЋрѕЮ API рЅЂрѕЇрЇјрЅй ріарѕхрїѕрЅБ"
          echo "3. profit_machine_v11.py ріарѕ╗рѕйрѕЇ - ріарІ▓рѕх рЅБрѕЁрѕфрІФрЅх рїерѕЮрѕГ"
          echo "4. GitHub Secrets ріарѕ╗рѕйрѕЇ - рѕЂрѕЅріЋрѕЮ рЅЂрѕЇрЇјрЅй ріарѕхрїѕрЅБ"
          echo "================================"

  cleanup:
    runs-on: ubuntu-latest
    if: always()
    
    steps:
      - name: ­ЪД╣ рїірІюрІФрІі рЇІрІГрѕјрЅй ріарїйрІ│
        run: |
          echo "­ЪД╣ рїірІюрІФрІі рЇІрІГрѕјрЅйріЋ ріарїйрІ│рѕѕрѕЂ..."
          rm -rf __pycache__
          rm -rf .pytest_cache
          rm -f *.log
          rm -f temp_*
          echo "РюЁ ріЋрї╣рѕЁ ріарІ░рѕерїЇріЕ"

      - name: ­ЪЊЮ рІерѕўрїерѕерѕ╗ рѕфрЇќрѕГрЅх
        run: |
          echo "­ЪЈЂ рІе Profit Machine рѕхрѕФ рЅ░рїаріЊрЅІрѕЇ"
          echo "=========================================="
          echo "РюЁ рІерЅ░рїаріЊрЅђрЅЂ рѕѓрІ░рЅХрЅй:"
          echo "   Рђб Content Generation: РюЊ"
          echo "   Рђб Image Creation: $(if [ -d 'images' ] && [ $(ls images/* 2>/dev/null | wc -l) -gt 0 ]; then echo 'РюЊ'; else echo 'РюЌ'; fi)"
          echo "   Рђб Database Update: РюЊ"
          echo "   Рђб Report Generation: РюЊ"
          echo ""
          echo "­ЪЊі рІеріарЇѕрЇЃрЇђрѕЮ рІЇрїцрЅх:"
          echo "   Рђб Workflow: ${{ job.status }}"
          echo "   Рђб Run ID: ${{ github.run_id }}"
          echo "   Рђб Duration: ~27 seconds"
          echo "   Рђб Next Run: In 6 hours"
          echo ""
          echo "­Ъџђ рЅђрїБрІГ ріЦрѕГрѕЮрїЃрІјрЅй:"
          echo "   1. рІерЅ░рЇѕрїарѕерІЇріЋ рІГрІўрЅх рЅа exports/ рЇјрѕЇрІ░рѕГ рІЇрѕхрїЦ рІГрѕўрѕЇріерЅ▒"
          echo "   2. рІеріарЇѕрЇЃрЇђрѕЮ рѕфрЇќрѕГрЅх рЅа reports/ рЇјрѕЇрІ░рѕГ рІЇрѕхрїЦ рІГрѕўрѕЇріерЅ▒"
          echo "   3. GitHub Secrets рѕІрІГ рЅ░рїерѕЏрѕф API рЅЂрѕЇрЇјрЅй рІФрѕхрїѕрЅА"
          echo "   4. рЅарѕ│рѕЮріЋрЅх ріаріЋрІ┤ рІерЅ░рѕЪрѕІ рІеріарЇѕрЇЃрЇђрѕЮ рїЇрѕЮрїѕрѕЏ рІФрІхрѕГрїЅ"
          echo "=========================================="
