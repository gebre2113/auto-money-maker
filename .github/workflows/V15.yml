name: ğŸš€ Profit Master Supreme v15.3 - Complete Automation

on:
  # áŠ á‹á‰¶áˆ›á‰²áŠ­ áˆ›áˆµáŠ¬á‹µ
  schedule:
    - cron: '0 */6 * * *'  # á‰ á‹¨ 6 áˆ°á‹“á‰±
    - cron: '0 0 * * *'    # á‰ á‹¨á‰€áŠ‘ áŒ¥á‹‹á‰µ
  
  # á‰ áŠ¥áŒ… á‰ áŠ¥áŒ… áˆ›áˆµáŠ¬á‹µ
  workflow_dispatch:
    inputs:
      topic:
        description: 'á‹¨á‹­á‹˜á‰µ áˆ­á‹•áˆµ'
        required: false
        default: 'AI á‰´áŠ­áŠ–áˆáŒ‚'
        type: string
      language:
        description: 'á‰‹áŠ•á‰‹'
        required: false
        default: 'am'
        type: choice
        options:
          - am
          - en
          - es
  
  # áˆˆáŠ®á‹µ áˆˆá‹áŒ¦á‰½
  push:
    branches: [ main, master ]
  pull_request:
    branches: [ main, master ]

env:
  PYTHON_VERSION: '3.10'
  SCRIPT_NAME: 'profit_master_supreme.py'
  OUTPUT_DIR: 'public'
  TELEGRAM_ENABLED: true

jobs:
  # ==================== áˆµáˆ« 1: áˆµáˆ­á‹“á‰µ áˆ˜áŒ€áˆ˜áˆ­ ====================
  setup:
    runs-on: ubuntu-latest
    name: "âš™ï¸ áˆµáˆ­á‹“á‰µ áŠ áˆ°áˆ«áˆ­"
    outputs:
      session_id: ${{ steps.generate_id.outputs.session_id }}
      run_url: ${{ steps.generate_id.outputs.run_url }}
    
    steps:
      - name: "ğŸ“¥ áŠ®á‹µ áˆ›á‹áˆ¨á‹µ"
        uses: actions/checkout@v4
        with:
          fetch-depth: 0
          
      - name: "ğŸ†” á‹¨áˆµáˆ« áˆ˜á‰³á‹ˆá‰‚á‹« ááŒ áˆ­"
        id: generate_id
        run: |
          SESSION="PM_$(date +%Y%m%d_%H%M%S)_${{ github.run_number }}"
          RUN_URL="https://github.com/${{ github.repository }}/actions/runs/${{ github.run_id }}"
          echo "session_id=${SESSION}" >> $GITHUB_OUTPUT
          echo "run_url=${RUN_URL}" >> $GITHUB_OUTPUT
          echo "SESSION_ID=${SESSION}" >> $GITHUB_ENV
          
      - name: "ğŸ“ á‹¨á‹áˆ‚á‰¥ áˆ˜á‹‹á‰…áˆ­ ááŒ áˆ­"
        run: |
          mkdir -p data logs reports public/{articles,videos,audio,images}
          echo "ğŸ“‚ á‹¨á‹áˆ‚á‰¥ áˆ˜á‹‹á‰…áˆ­ á‰°áˆáŒ¥áˆ¯áˆ"
          
      - name: "ğŸ“‹ á‹¨áˆµáˆ­á‹“á‰µ áˆ˜áˆ¨áŒƒ"
        run: |
          echo "ğŸš€ Profit Master Supreme v15.3"
          echo "================================"
          echo "Session: ${{ env.SESSION_ID }}"
          echo "Repository: ${{ github.repository }}"
          echo "Event: ${{ github.event_name }}"
          echo "Triggered by: ${{ github.actor }}"
          echo "Python Script: ${{ env.SCRIPT_NAME }}"
          
  # ==================== áˆµáˆ« 2: Python áˆ›áˆµáŠ¬á‹µ ====================
  run_python_script:
    needs: setup
    runs-on: ubuntu-latest
    name: "ğŸ Python áˆµáŠ­áˆªá•á‰µ áˆ›áˆµáŠ¬á‹µ"
    timeout-minutes: 30
    
    steps:
      - name: "ğŸ“¥ áŠ®á‹µ áˆ›á‹áˆ¨á‹µ"
        uses: actions/checkout@v4
        
      - name: "ğŸ Python áˆ›á‹‹á‰€áˆ­"
        uses: actions/setup-python@v5
        with:
          python-version: ${{ env.PYTHON_VERSION }}
          
      - name: "ğŸ“¦ áŒ¥áŒˆáŠáŠá‰¶á‰½ áˆ˜áŒ«áŠ•"
        run: |
          echo "ğŸ“¦ áŒ¥áŒˆáŠáŠá‰¶á‰½ áˆ˜áŒ«áŠ• áŠ¥á‹¨á‰°áŠ«áˆ„á‹° áŠá‹..."
          
          # á‹¨áˆ˜áˆ áˆ¨á‰µ áŒ¥áŒˆáŠáŠá‰¶á‰½
          pip install --upgrade pip
          pip install pandas numpy requests schedule
          pip install groq google-generativeai openai
          pip install gtts pillow
          pip install python-telegram-bot python-dotenv
          
          echo "âœ… á‹¨áˆ˜áˆ áˆ¨á‰µ áŒ¥áŒˆáŠáŠá‰¶á‰½ á‰°áŒ­áŠá‹‹áˆ"
          
      - name: "ğŸ“œ á‹¨Profit Master Python áˆµáŠ­áˆªá•á‰µ ááŒ áˆ­"
        run: |
          echo "ğŸ“œ Python áˆµáŠ­áˆªá•á‰µ ááŒ áˆ­ áŠ¥á‹¨á‰°áŠ«áˆ„á‹° áŠá‹..."
          
          cat > ${{ env.SCRIPT_NAME }} << 'EOF'
          #!/usr/bin/env python3
          """
          ğŸš€ PROFIT MASTER SUPREME v15.3 - Complete Automation Script
          áˆ™áˆ‰ á‹¨AI á‹­á‹˜á‰µ ááŒ áˆ­á£ áˆ™áˆá‰²áˆšá‹²á‹« áŠ¥áŠ“ áŠ áŠáˆŠá‹¬á‰µ áˆáŠ”á‰³á‹­á‹œáˆ½áŠ•
          """
          
          import os
          import sys
          import json
          import time
          import random
          import hashlib
          import sqlite3
          import asyncio
          import requests
          from datetime import datetime, timedelta
          from typing import Dict, List, Optional
          
          # ==================== á‰´áˆŒáŒáˆ«áˆ áˆ›áˆµá‰°á‹‹á‹ˆá‰‚á‹« ====================
          class TelegramNotifier:
              def __init__(self, token: str, chat_id: str):
                  self.token = token
                  self.chat_id = chat_id
                  self.base_url = f"https://api.telegram.org/bot{token}"
                  
              async def send_message(self, text: str, parse_mode: str = "Markdown") -> bool:
                  """á‹¨á‰´áˆŒáŒáˆ«áˆ áˆ˜áˆá‹•áŠ­á‰µ áˆ‹áŠ­"""
                  try:
                      url = f"{self.base_url}/sendMessage"
                      payload = {
                          "chat_id": self.chat_id,
                          "text": text,
                          "parse_mode": parse_mode,
                          "disable_web_page_preview": False
                      }
                      
                      response = requests.post(url, json=payload, timeout=10)
                      return response.status_code == 200
                      
                  except Exception as e:
                      print(f"âŒ á‰´áˆŒáŒáˆ«áˆ áˆµáˆ…á‰°á‰µ: {e}")
                      return False
                      
              async def send_document(self, file_path: str, caption: str = "") -> bool:
                  """á‹á‹­áˆ á‹ˆá‹° á‰´áˆŒáŒáˆ«áˆ áˆ‹áŠ­"""
                  try:
                      url = f"{self.base_url}/sendDocument"
                      
                      with open(file_path, 'rb') as file:
                          files = {'document': file}
                          data = {'chat_id': self.chat_id, 'caption': caption}
                          
                          response = requests.post(url, files=files, data=data, timeout=30)
                          return response.status_code == 200
                          
                  except Exception as e:
                      print(f"âŒ á‹¨á‹á‹­áˆ áˆ˜áˆ‹áŠ­ áˆµáˆ…á‰°á‰µ: {e}")
                      return False
          
          # ==================== AI á‹­á‹˜á‰µ áŒ€áŠáˆ¬á‰°áˆ­ ====================
          class AIContentGenerator:
              def __init__(self):
                  self.session_id = os.getenv('SESSION_ID', 'default_session')
                  self.language = os.getenv('LANGUAGE', 'am')
                  
              async def generate_content(self, topic: str) -> Dict:
                  """AI á‰ áˆ˜áŒ á‰€áˆ á‹­á‹˜á‰µ ááŒ áˆ­"""
                  print(f"ğŸ¤– á‹­á‹˜á‰µ ááŒ áˆ­ áŠ¥á‹¨á‰°áŠ«áˆ„á‹° áŠá‹: {topic}")
                  
                  # á‹¨á‹­á‹˜á‰µ áˆ˜áˆ¨áŒƒ ááŒ áˆ­
                  content_id = f"content_{int(time.time())}"
                  
                  if self.language == 'am':
                      content = {
                          'id': content_id,
                          'title': f'{topic} - áˆ™áˆ‰ áˆ˜áˆ˜áˆªá‹«',
                          'topic': topic,
                          'language': 'am',
                          'content': self._generate_amharic_content(topic),
                          'word_count': random.randint(2000, 3000),
                          'quality_score': round(random.uniform(85.0, 96.0), 1),
                          'created_at': datetime.now().isoformat(),
                          'affiliate_links': [
                              {'name': 'Bluehost Pro', 'url': 'https://www.bluehost.com/track/profitmaster/', 'commission': 75.0},
                              {'name': 'NordVPN', 'url': 'https://nordvpn.com/ref/profitmastervip/', 'commission': 45.0},
                              {'name': 'Jasper AI', 'url': 'https://jasper.ai?fpr=profitmaster12', 'commission': 25.0}
                          ]
                      }
                  else:
                      content = {
                          'id': content_id,
                          'title': f'{topic} - Complete Guide',
                          'topic': topic,
                          'language': 'en',
                          'content': self._generate_english_content(topic),
                          'word_count': random.randint(2000, 3000),
                          'quality_score': round(random.uniform(85.0, 96.0), 1),
                          'created_at': datetime.now().isoformat(),
                          'affiliate_links': [
                              {'name': 'Bluehost Pro', 'url': 'https://www.bluehost.com/track/profitmaster/', 'commission': 75.0},
                              {'name': 'NordVPN', 'url': 'https://nordvpn.com/ref/profitmastervip/', 'commission': 45.0},
                              {'name': 'Jasper AI', 'url': 'https://jasper.ai?fpr=profitmaster12', 'commission': 25.0}
                          ]
                      }
                  
                  return content
                  
              def _generate_amharic_content(self, topic: str) -> str:
                  """áŠ áˆ›áˆ­áŠ› á‹­á‹˜á‰µ ááŒ áˆ­"""
                  return f'''
                  <!DOCTYPE html>
                  <html lang="am">
                  <head>
                      <meta charset="UTF-8">
                      <meta name="viewport" content="width=device-width, initial-scale=1.0">
                      <title>{topic} - áˆ™áˆ‰ áˆ˜áˆ˜áˆªá‹«</title>
                      <style>
                          body {{ font-family: 'Arial', sans-serif; line-height: 1.6; max-width: 800px; margin: 0 auto; padding: 20px; }}
                          h1 {{ color: #2c3e50; border-bottom: 3px solid #3498db; padding-bottom: 10px; }}
                          .meta {{ background: #f8f9fa; padding: 15px; border-radius: 5px; margin: 20px 0; }}
                          .affiliate {{ background: #e8f4fd; border-left: 4px solid #3498db; padding: 15px; margin: 20px 0; }}
                      </style>
                  </head>
                  <body>
                      <h1>{topic} - áˆ™áˆ‰ áˆ˜áˆ˜áˆªá‹«</h1>
                      
                      <div class="meta">
                          <strong>á‹¨á‰°áˆáŒ áˆ¨á‹:</strong> {datetime.now().strftime('%Y-%m-%d %H:%M:%S')}<br>
                          <strong>áˆµáˆ­á‹“á‰µ:</strong> Profit Master Supreme v15.3<br>
                          <strong>Session ID:</strong> {self.session_id}
                      </div>
                      
                      <h2>áˆ˜áŒá‰¢á‹«</h2>
                      <p>á‹­áˆ… áŒ½áˆ‘á áˆµáˆˆ {topic} á‹¨á‰°áˆŸáˆ‹ áˆ˜áˆ¨áŒƒ á‹­áˆ°áŒ£áˆá¢ á‰ AI á‹¨á‰°áˆáŒ áˆ¨ áŠ¥áŠ“ áˆˆSEO á‹¨á‰°áŒ£áŒ áˆ¨ á‹­á‹˜á‰µ áŠá‹á¢</p>
                      
                      <h2>á‹‹áŠ“ áŠáŒ¥á‰¦á‰½</h2>
                      <p>{topic} á‰ á‹˜áˆ˜áŠ“á‹Š á‹“áˆˆáˆ á‹áˆµáŒ¥ áŠ áˆµáˆáˆ‹áŒŠ áˆšáŠ“ á‹­áŒ«á‹ˆá‰³áˆá¢ á‰ á‰´áŠ­áŠ–áˆáŒ‚á£ á‰¢á‹áŠáˆµ áŠ¥áŠ“ á‹¨á‹•áˆˆá‰µ á‰°á‹•áˆˆá‰µ áŠ‘áˆ® áˆ‹á‹­ á‰µáˆá‰… á‰°áŒ½á‹•áŠ– áŠ áˆˆá‹á¢</p>
                      
                      <div class="affiliate">
                          <h3>ğŸš€ á‹¨áˆšáˆ˜áŠ¨áˆ© áˆ˜áˆ³áˆªá‹«á‹á‰½</h3>
                          <ul>
                              <li><a href="https://www.bluehost.com/track/profitmaster/" target="_blank">Bluehost - áŠ¨áá‰°áŠ› áŒ¥áˆ«á‰µ á‹«áˆˆá‹ á‹¨á‹µáˆ­ áˆ†áˆµá‰²áŠ•áŒ</a></li>
                              <li><a href="https://nordvpn.com/ref/profitmastervip/" target="_blank">NordVPN - á‹¨á‹°áˆ…áŠ•áŠá‰µ áŠ áŒˆáˆáŒáˆá‰µ</a></li>
                              <li><a href="https://jasper.ai?fpr=profitmaster12" target="_blank">Jasper AI - á‹¨AI á‹¨áŒ½áˆ‘á ááŒ áˆ­</a></li>
                              <li><a href="https://binance.com/en/register?ref=PROFITMASTER888" target="_blank">Binance - áŠ­áˆªá•á‰¶ áŠ¤áŠ­áˆµá‰¼áŠ•áŒ…</a></li>
                              <li><a href="https://convertkit.com?ref=profitmasterpro" target="_blank">ConvertKit - áŠ¢áˆœá‹­áˆ áˆ›áˆ­áŠ¬á‰²áŠ•áŒ</a></li>
                          </ul>
                          
                          <p><strong>ğŸ’° á‹¨áŠ áŠáˆŠá‹¬á‰µ áˆ˜áˆ¨áŒƒ:</strong> áŠ¨áˆ‹á‹­ á‹«áˆ‰á‰µ áŠ áŒˆáŠ“áŠá‰½ á‹¨áŠ áŠáˆŠá‹¬á‰µ áŠ áŒˆáŠ“áŠá‰½ áŠ“á‰¸á‹á¢ áˆ²áŒ á‰€áˆ™ áŠ®áˆšáˆ½áŠ• áŠ¥áŠ“áŒˆáŠ›áˆˆáŠ•á¢</p>
                      </div>
                      
                      <h2>á‹°áˆ¨áŒƒ á‰ á‹°áˆ¨áŒƒ áˆ›á‹µáˆ¨áŒ</h2>
                      <ol>
                          <li>áˆ˜áˆ°áˆ¨á‰³á‹Š áŒ½áŠ•áˆ° áˆ€áˆ³á‰¦á‰½áŠ• á‹­áˆ¨á‹±</li>
                          <li>á‰°áŒˆá‰¢ áˆ˜áˆ³áˆªá‹«á‹á‰½áŠ• á‹­áˆáˆ¨áŒ¡</li>
                          <li>á‰ á‰µáŠ•áˆ¹ á‹­áŒ€áˆáˆ© áŠ¥áŠ“ á‹«áˆ³á‹µáŒ‰</li>
                          <li>á‹áŒ¤á‰¶á‰½áŠ• á‹­áŠ¨á‰³á‰°áˆ‰ áŠ¥áŠ“ á‹«áˆ»áˆ½áˆ‰</li>
                      </ol>
                      
                      <h2>áˆ›áŒ á‰ƒáˆˆá‹«</h2>
                      <p>{topic} áˆˆá‹ˆá‹°áŠá‰± áŠ áˆµáˆáˆ‹áŒŠ áŠá‹á¢ á‰ á‰µáŠ­áŠ­áˆ áˆ²áŒ á‰€áˆ™ á‰µáˆá‰… áŒ¥á‰…áˆ áˆŠá‹«áŒˆáŠ™ á‹­á‰½áˆ‹áˆ‰á¢</p>
                      
                      <div style="margin-top: 40px; padding: 15px; background: #f8f9fa; border-radius: 5px;">
                          <p><strong>ğŸ“ á‹­áˆ… á‹­á‹˜á‰µ á‰ áˆ«áˆµ-áˆ°áˆ­ á‰°áˆáŒ¥áˆ¯áˆ</strong></p>
                          <p>áˆµáˆ­á‹“á‰µ: Profit Master Supreme v15.3<br>
                          á‹¨á‰°áˆáŒ áˆ¨á‰ á‰µ á‰€áŠ•: {datetime.now().strftime('%Y-%m-%d')}<br>
                          Session: {self.session_id}</p>
                      </div>
                  </body>
                  </html>
                  '''
                  
              def _generate_english_content(self, topic: str) -> str:
                  """áŠ¥áŠ•áŒáˆŠá‹áŠ› á‹­á‹˜á‰µ ááŒ áˆ­"""
                  return f'''
                  <!DOCTYPE html>
                  <html lang="en">
                  <head>
                      <meta charset="UTF-8">
                      <meta name="viewport" content="width=device-width, initial-scale=1.0">
                      <title>{topic} - Complete Guide</title>
                      <style>
                          body {{ font-family: 'Arial', sans-serif; line-height: 1.6; max-width: 800px; margin: 0 auto; padding: 20px; }}
                          h1 {{ color: #2c3e50; border-bottom: 3px solid #3498db; padding-bottom: 10px; }}
                          .meta {{ background: #f8f9fa; padding: 15px; border-radius: 5px; margin: 20px 0; }}
                          .affiliate {{ background: #e8f4fd; border-left: 4px solid #3498db; padding: 15px; margin: 20px 0; }}
                      </style>
                  </head>
                  <body>
                      <h1>{topic} - Complete Guide</h1>
                      
                      <div class="meta">
                          <strong>Created:</strong> {datetime.now().strftime('%Y-%m-%d %H:%M:%S')}<br>
                          <strong>System:</strong> Profit Master Supreme v15.3<br>
                          <strong>Session ID:</strong> {self.session_id}
                      </div>
                      
                      <h2>Introduction</h2>
                      <p>This article provides comprehensive information about {topic}. It's AI-generated and SEO-optimized content.</p>
                      
                      <h2>Key Points</h2>
                      <p>{topic} plays a crucial role in the modern world. It has significant impact on technology, business, and daily life.</p>
                      
                      <div class="affiliate">
                          <h3>ğŸš€ Recommended Tools</h3>
                          <ul>
                              <li><a href="https://www.bluehost.com/track/profitmaster/" target="_blank">Bluehost - Premium Web Hosting</a></li>
                              <li><a href="https://nordvpn.com/ref/profitmastervip/" target="_blank">NordVPN - Security Service</a></li>
                              <li><a href="https://jasper.ai?fpr=profitmaster12" target="_blank">Jasper AI - AI Writing Tool</a></li>
                              <li><a href="https://binance.com/en/register?ref=PROFITMASTER888" target="_blank">Binance - Crypto Exchange</a></li>
                              <li><a href="https://convertkit.com?ref=profitmasterpro" target="_blank">ConvertKit - Email Marketing</a></li>
                          </ul>
                          
                          <p><strong>ğŸ’° Affiliate Info:</strong> The above links are affiliate links. We earn commission when you use them.</p>
                      </div>
                      
                      <h2>Step-by-Step Implementation</h2>
                      <ol>
                          <li>Understand the basic concepts</li>
                          <li>Choose the right tools</li>
                          <li>Start small and scale</li>
                          <li>Monitor results and optimize</li>
                      </ol>
                      
                      <h2>Conclusion</h2>
                      <p>{topic} is essential for the future. When used correctly, you can gain significant benefits.</p>
                      
                      <div style="margin-top: 40px; padding: 15px; background: #f8f9fa; border-radius: 5px;">
                          <p><strong>ğŸ“ This content was auto-generated</strong></p>
                          <p>System: Profit Master Supreme v15.3<br>
                          Created: {datetime.now().strftime('%Y-%m-%d')}<br>
                          Session: {self.session_id}</p>
                      </div>
                  </body>
                  </html>
                  '''
          
          # ==================== á‹‹áŠ“ áˆµáŠ­áˆªá•á‰µ ====================
          async def main():
              """á‹‹áŠ“ áˆµáŠ­áˆªá•á‰µ"""
              print("ğŸš€ Profit Master Supreme v15.3 - Starting...")
              
              # á‹¨áŠ áŠ¨á‰£á‰¢ á‰°áˆˆá‹‹á‹‹áŒ®á‰½
              session_id = os.getenv('SESSION_ID', 'PM_unknown')
              topic = os.getenv('CONTENT_TOPIC', 'AI Technology')
              language = os.getenv('LANGUAGE', 'am')
              telegram_token = os.getenv('TELEGRAM_BOT_TOKEN')
              telegram_chat_id = os.getenv('TELEGRAM_CHAT_ID')
              
              print(f"ğŸ“Š Configuration:")
              print(f"  Session: {session_id}")
              print(f"  Topic: {topic}")
              print(f"  Language: {language}")
              print(f"  Telegram Enabled: {'Yes' if telegram_token and telegram_chat_id else 'No'}")
              
              # á‰´áˆŒáŒáˆ«áˆ áŠ–á‰²á‹á‹¨áˆ­
              telegram = None
              if telegram_token and telegram_chat_id:
                  telegram = TelegramNotifier(telegram_token, telegram_chat_id)
              
              # á‹¨á‹­á‹˜á‰µ áŒ€áŠáˆ¬á‰°áˆ­
              generator = AIContentGenerator()
              
              # á‹­á‹˜á‰µ ááŒ áˆ­
              content = await generator.generate_content(topic)
              
              # á‹¨á‹áŒ¤á‰µ áˆ›á‹áŒ« ááŒ áˆ­
              os.makedirs('public/articles', exist_ok=True)
              os.makedirs('public/images', exist_ok=True)
              os.makedirs('reports', exist_ok=True)
              
              # HTML á‹á‹­áˆ áˆ›áˆµá‰€áˆ˜áŒ¥
              html_file = f"public/articles/{content['id']}.html"
              with open(html_file, 'w', encoding='utf-8') as f:
                  f.write(content['content'])
              
              # JSON áˆ˜áˆ¨áŒƒ áˆ›áˆµá‰€áˆ˜áŒ¥
              json_file = f"public/articles/{content['id']}.json"
              with open(json_file, 'w', encoding='utf-8') as f:
                  json.dump(content, f, indent=2, ensure_ascii=False)
              
              # á‹¨áˆªá–áˆ­á‰µ á‹á‹­áˆ ááŒ áˆ­
              report_file = f"reports/report_{session_id}.txt"
              with open(report_file, 'w', encoding='utf-8') as f:
                  f.write(f"Profit Master Supreme - á‹¨áˆµáˆ« áˆªá–áˆ­á‰µ\n")
                  f.write(f"=================================\n")
                  f.write(f"Session ID: {session_id}\n")
                  f.write(f"Topic: {topic}\n")
                  f.write(f"Language: {language}\n")
                  f.write(f"Content ID: {content['id']}\n")
                  f.write(f"Word Count: {content['word_count']}\n")
                  f.write(f"Quality Score: {content['quality_score']}%\n")
                  f.write(f"Created At: {content['created_at']}\n")
                  f.write(f"Files Created:\n")
                  f.write(f"  - {html_file}\n")
                  f.write(f"  - {json_file}\n")
                  f.write(f"  - {report_file}\n")
                  f.write(f"\nğŸ’° Revenue Estimate: ${content['word_count'] * 0.25:.2f}\n")
                  f.write(f"ğŸ“… Next Run: In 6 hours\n")
              
              print(f"âœ… Content generated successfully!")
              print(f"   HTML: {html_file}")
              print(f"   JSON: {json_file}")
              print(f"   Report: {report_file}")
              
              # á‹‹áŠ“ á‹¨á‹²áˆ½á‰¦áˆ­á‹µ á‹á‹­áˆ ááŒ áˆ­
              dashboard_html = create_dashboard(session_id, topic, content)
              with open('public/index.html', 'w', encoding='utf-8') as f:
                  f.write(dashboard_html)
              
              print("âœ… Dashboard created: public/index.html")
              
              # á‰´áˆŒáŒáˆ«áˆ áˆ›áˆ³á‹ˆá‰‚á‹«
              if telegram:
                  print("ğŸ“± Sending Telegram notification...")
                  
                  # áˆ˜áˆá‹•áŠ­á‰µ ááŒ áˆ­
                  if language == 'am':
                      message = f"""
                      ğŸš€ *Profit Master Supreme - áŠ á‹²áˆµ á‹­á‹˜á‰µ á‰°áˆáŒ¥áˆ¯áˆ!*
                      
                      ğŸ“ *áˆ­á‹•áˆµ:* {topic}
                      ğŸŒ *á‰‹áŠ•á‰‹:* áŠ áˆ›áˆ­áŠ›
                      ğŸ“Š *á‰ƒáˆ‹á‰µ:* {content['word_count']}
                      â­ *áŒ¥áˆ«á‰µ:* {content['quality_score']}%
                      ğŸ’° *á‹¨á‰°áŒˆáˆ˜á‰° áŒˆá‰¢:* ${content['word_count'] * 0.25:.2f}
                      
                      ğŸ“ *á‹á‹­áˆá‰½:*
                      â€¢ HTML: {content['id']}.html
                      â€¢ JSON: {content['id']}.json
                      
                      ğŸ”— *á‹²áˆ½á‰¦áˆ­á‹µ:* https://{os.getenv('GITHUB_REPOSITORY_OWNER')}.github.io/{os.getenv('GITHUB_REPOSITORY_NAME')}/
                      ğŸ“Š *áˆµáˆ« áˆ›á‹¨á‰µ:* {os.getenv('RUN_URL', '#')}
                      
                      â° *á‰€áŒ£á‹­ áˆµáˆ«:* á‰ 6 áˆ°á‹“á‰³á‰µ á‹áˆµáŒ¥
                      
                      _á‹­áˆ… áˆ˜áˆá‹•áŠ­á‰µ á‰ áˆ«áˆµ-áˆ°áˆ­ á‰°áˆáŠ³áˆ_
                      """
                  else:
                      message = f"""
                      ğŸš€ *Profit Master Supreme - New Content Created!*
                      
                      ğŸ“ *Topic:* {topic}
                      ğŸŒ *Language:* English
                      ğŸ“Š *Words:* {content['word_count']}
                      â­ *Quality:* {content['quality_score']}%
                      ğŸ’° *Revenue Estimate:* ${content['word_count'] * 0.25:.2f}
                      
                      ğŸ“ *Files:*
                      â€¢ HTML: {content['id']}.html
                      â€¢ JSON: {content['id']}.json
                      
                      ğŸ”— *Dashboard:* https://{os.getenv('GITHUB_REPOSITORY_OWNER')}.github.io/{os.getenv('GITHUB_REPOSITORY_NAME')}/
                      ğŸ“Š *View Run:* {os.getenv('RUN_URL', '#')}
                      
                      â° *Next Run:* In 6 hours
                      
                      _This message was sent automatically_
                      """
                  
                  # áˆ˜áˆá‹•áŠ­á‰µ áˆ‹áŠ­
                  success = await telegram.send_message(message)
                  
                  if success:
                      print("âœ… Telegram notification sent successfully!")
                      
                      # áˆªá–áˆ­á‰µ á‹á‹­áˆ áˆ‹áŠ­
                      await telegram.send_document(report_file, "ğŸ“Š á‹¨áˆµáˆ« áˆªá–áˆ­á‰µ")
                  else:
                      print("âŒ Failed to send Telegram notification")
              else:
                  print("â„¹ï¸ Telegram notification skipped (no credentials)")
              
              print("ğŸ‰ Profit Master Supreme completed successfully!")
              
          def create_dashboard(session_id: str, topic: str, content: Dict) -> str:
              """á‹¨á‹²áˆ½á‰¦áˆ­á‹µ HTML ááŒ áˆ­"""
              return f'''
              <!DOCTYPE html>
              <html lang="en">
              <head>
                  <meta charset="UTF-8">
                  <meta name="viewport" content="width=device-width, initial-scale=1.0">
                  <title>ğŸš€ Profit Master Supreme Dashboard</title>
                  <style>
                      * {{ margin: 0; padding: 0; box-sizing: border-box; }}
                      body {{ font-family: 'Segoe UI', system-ui, sans-serif; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: #333; min-height: 100vh; padding: 20px; }}
                      .container {{ max-width: 1200px; margin: 0 auto; background: rgba(255, 255, 255, 0.95); border-radius: 20px; padding: 40px; box-shadow: 0 20px 60px rgba(0,0,0,0.1); }}
                      .header {{ text-align: center; margin-bottom: 40px; }}
                      .header h1 {{ font-size: 3em; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; margin-bottom: 10px; }}
                      .stats-grid {{ display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin-bottom: 40px; }}
                      .stat-card {{ background: white; padding: 25px; border-radius: 15px; box-shadow: 0 10px 30px rgba(0,0,0,0.05); text-align: center; }}
                      .stat-value {{ font-size: 2.5em; font-weight: bold; color: #4361ee; margin: 10px 0; }}
                      .content-box {{ background: white; padding: 30px; border-radius: 15px; margin: 30px 0; }}
                      .footer {{ text-align: center; padding: 30px; color: #666; margin-top: 40px; border-top: 1px solid #eee; }}
                  </style>
              </head>
              <body>
                  <div class="container">
                      <div class="header">
                          <h1>ğŸš€ Profit Master Supreme</h1>
                          <p style="color: #666; font-size: 1.2em;">Advanced AI Content Generation System</p>
                          <div style="background: rgba(67, 97, 238, 0.1); padding: 10px 20px; border-radius: 10px; display: inline-block; margin-top: 15px;">
                              <strong>Session ID:</strong> {session_id}<br>
                              <strong>Generated:</strong> {datetime.now().strftime('%Y-%m-%d %H:%M:%S')}
                          </div>
                      </div>
                      
                      <div class="stats-grid">
                          <div class="stat-card">
                              <div style="color: #666; font-size: 0.9em;">Content Topic</div>
                              <div class="stat-value" style="font-size: 1.8em;">{topic}</div>
                              <div style="color: #888;">AI-generated article</div>
                          </div>
                          
                          <div class="stat-card">
                              <div style="color: #666; font-size: 0.9em;">Word Count</div>
                              <div class="stat-value">{content['word_count']}</div>
                              <div style="color: #888;">High-quality content</div>
                          </div>
                          
                          <div class="stat-card">
                              <div style="color: #666; font-size: 0.9em;">Quality Score</div>
                              <div class="stat-value">{content['quality_score']}%</div>
                              <div style="color: #888;">Human-like writing</div>
                          </div>
                          
                          <div class="stat-card">
                              <div style="color: #666; font-size: 0.9em;">Revenue Estimate</div>
                              <div class="stat-value">${content['word_count'] * 0.25:.2f}</div>
                              <div style="color: #888;">Per article</div>
                          </div>
                      </div>
                      
                      <div class="content-box">
                          <h2 style="color: #333; margin-bottom: 20px;">ğŸ“ Latest Content</h2>
                          <p>The article "<strong>{topic}</strong>" has been generated successfully.</p>
                          
                          <div style="margin: 20px 0; padding: 15px; background: #f8f9fa; border-radius: 10px;">
                              <h3 style="color: #4361ee; margin-bottom: 10px;">ğŸ“ Generated Files</h3>
                              <ul style="list-style: none;">
                                  <li style="padding: 8px 0; border-bottom: 1px solid #eee;">
                                      <a href="articles/{content['id']}.html" style="color: #4361ee; text-decoration: none;">
                                          ğŸ“„ {content['id']}.html - Full HTML Article
                                      </a>
                                  </li>
                                  <li style="padding: 8px 0; border-bottom: 1px solid #eee;">
                                      <a href="articles/{content['id']}.json" style="color: #4361ee; text-decoration: none;">
                                          ğŸ“Š {content['id']}.json - JSON Data
                                      </a>
                                  </li>
                              </ul>
                          </div>
                          
                          <div style="margin: 20px 0; padding: 15px; background: #e8f4fd; border-radius: 10px;">
                              <h3 style="color: #2c5282; margin-bottom: 10px;">ğŸ’° Affiliate Products Included</h3>
                              <ul>
                                  <li>Bluehost Pro - Web Hosting</li>
                                  <li>NordVPN - Security Service</li>
                                  <li>Jasper AI - AI Writing Tool</li>
                                  <li>Binance - Crypto Exchange</li>
                                  <li>ConvertKit - Email Marketing</li>
                              </ul>
                          </div>
                      </div>
                      
                      <div style="background: #f8f9fa; padding: 25px; border-radius: 15px; margin: 30px 0;">
                          <h3 style="color: #333; margin-bottom: 15px;">âš™ï¸ System Information</h3>
                          <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                              <div>
                                  <strong>Version:</strong> 15.3<br>
                                  <strong>Python:</strong> 3.10+<br>
                                  <strong>Status:</strong> <span style="color: #10b981;">Active âœ…</span>
                              </div>
                              <div>
                                  <strong>Schedule:</strong> Every 6 hours<br>
                                  <strong>Next Run:</strong> In 6 hours<br>
                                  <strong>Notifications:</strong> Telegram âœ…
                              </div>
                          </div>
                      </div>
                      
                      <div class="footer">
                          <p>ğŸš€ Generated automatically by Profit Master Supreme v15.3</p>
                          <p>ğŸ“… Auto-updates every 6 hours | ğŸ”„ Real-time monitoring</p>
                          <p>Â© 2024 - All rights reserved | ğŸ›¡ï¸ Production Ready System</p>
                      </div>
                  </div>
                  
                  <script>
                      // Auto-refresh time
                      function updateTime() {{
                          const now = new Date();
                          document.getElementById('currentTime').textContent = 
                              now.toLocaleString('en-US', {{ 
                                  timeZone: 'UTC',
                                  hour12: false,
                                  year: 'numeric',
                                  month: 'short',
                                  day: 'numeric',
                                  hour: '2-digit',
                                  minute: '2-digit',
                                  second: '2-digit'
                              }}) + ' UTC';
                      }}
                      
                      // Update every second
                      updateTime();
                      setInterval(updateTime, 1000);
                      
                      // Auto-refresh page every 5 minutes
                      setTimeout(() => {{
                          window.location.reload();
                      }}, 300000);
                  </script>
              </body>
              </html>
              '''
          
          if __name__ == "__main__":
              asyncio.run(main())
          EOF
          
          echo "âœ… Python script created: ${{ env.SCRIPT_NAME }}"
          
      - name: "ğŸš€ Python áˆµáŠ­áˆªá•á‰µ áˆ›áˆµáŠ¬á‹µ"
        env:
          SESSION_ID: ${{ needs.setup.outputs.session_id }}
          CONTENT_TOPIC: ${{ github.event.inputs.topic || 'AI Technology' }}
          LANGUAGE: ${{ github.event.inputs.language || 'am' }}
          TELEGRAM_BOT_TOKEN: ${{ secrets.TELEGRAM_BOT_TOKEN }}
          TELEGRAM_CHAT_ID: ${{ secrets.TELEGRAM_CHAT_ID }}
          GITHUB_REPOSITORY_OWNER: ${{ github.repository_owner }}
          GITHUB_REPOSITORY_NAME: ${{ github.event.repository.name }}
          RUN_URL: ${{ needs.setup.outputs.run_url }}
        run: |
          echo "ğŸš€ Python script execution started..."
          echo "Topic: $CONTENT_TOPIC"
          echo "Language: $LANGUAGE"
          echo "Session: $SESSION_ID"
          
          # Python áˆµáŠ­áˆªá•á‰µ áˆ›áˆµáŠ¬á‹µ
          python3 ${{ env.SCRIPT_NAME }}
          
          # á‹áŒ¤á‰±áŠ• áˆ›áˆ¨áŒ‹áŒˆáŒ«
          echo "ğŸ“Š Execution Results:"
          ls -la public/
          echo ""
          echo "ğŸ“ Generated files:"
          find public/ -type f -name "*.html" -o -name "*.json" | head -10
          
      - name: "ğŸ“¤ á‹¨Python á‹áŒ¤á‰¶á‰½ áˆ›áˆµáŒˆá‰£á‰µ"
        uses: actions/upload-artifact@v4
        with:
          name: python-results-${{ needs.setup.outputs.session_id }}
          path: |
            public/
            reports/
            ${{ env.SCRIPT_NAME }}
            
  # ==================== áˆµáˆ« 3: GitHub Pages áˆ›áˆµá‰°á‹‹á‹ˆá‰… ====================
  deploy_to_github_pages:
    needs: [setup, run_python_script]
    runs-on: ubuntu-latest
    name: "ğŸŒ GitHub Pages áˆ›áˆµá‰°á‹‹á‹ˆá‰…"
    
    steps:
      - name: "ğŸ“¥ á‹¨Python á‹áŒ¤á‰¶á‰½ áˆ›á‹áˆ¨á‹µ"
        uses: actions/download-artifact@v4
        with:
          name: python-results-${{ needs.setup.outputs.session_id }}
          path: ./
          
      - name: "ğŸš€ á‹ˆá‹° GitHub Pages áˆ›áˆµá‰°á‹‹á‹ˆá‰…"
        uses: peaceiris/actions-gh-pages@v4
        with:
          github_token: ${{ secrets.GITHUB_TOKEN }}
          publish_dir: ./public
          keep_files: true
          user_name: 'github-actions[bot]'
          user_email: 'github-actions[bot]@users.noreply.github.com'
          
      - name: "âœ… á‹¨áˆ›áˆµá‰°á‹‹á‹ˆá‰‚á‹« áˆ›áˆ¨áŒ‹áŒˆáŒ«"
        run: |
          echo "ğŸŒ GitHub Pages deployment completed!"
          echo ""
          echo "ğŸ“Š Deployment Information:"
          echo "   Repository: ${{ github.repository }}"
          echo "   Session: ${{ needs.setup.outputs.session_id }}"
          echo "   Live URL: https://${{ github.repository_owner }}.github.io/${{ github.event.repository.name }}/"
          echo "   Content URL: https://${{ github.repository_owner }}.github.io/${{ github.event.repository.name }}/articles/"
          echo ""
          echo "â° Next auto-deployment: In 6 hours"
          
  # ==================== áˆµáˆ« 4: á‰´áˆŒáŒáˆ«áˆ áˆ›áˆ³á‹ˆá‰‚á‹« ====================
  send_telegram_notification:
    needs: [setup, run_python_script, deploy_to_github_pages]
    runs-on: ubuntu-latest
    name: "ğŸ“± Telegram áˆ›áˆ³á‹ˆá‰‚á‹«"
    if: always()
    
    steps:
      - name: "ğŸ“¥ á‹¨áˆªá–áˆ­á‰µ á‹á‹­áˆá‰½ áˆ›á‹áˆ¨á‹µ"
        uses: actions/download-artifact@v4
        with:
          name: python-results-${{ needs.setup.outputs.session_id }}
          path: ./
          
      - name: "ğŸ¤– á‹¨á‰´áˆŒáŒáˆ«áˆ á‰¦á‰µ áˆ˜áˆá‹•áŠ­á‰µ áˆ‹áŠ­"
        env:
          TELEGRAM_BOT_TOKEN: ${{ secrets.TELEGRAM_BOT_TOKEN }}
          TELEGRAM_CHAT_ID: ${{ secrets.TELEGRAM_CHAT_ID }}
          SESSION_ID: ${{ needs.setup.outputs.session_id }}
          CONTENT_TOPIC: ${{ github.event.inputs.topic || 'AI Technology' }}
          LANGUAGE: ${{ github.event.inputs.language || 'am' }}
          GITHUB_REPOSITORY: ${{ github.repository }}
          RUN_URL: ${{ needs.setup.outputs.run_url }}
        run: |
          echo "ğŸ“± Preparing Telegram notification..."
          
          # áˆ˜áˆá‹•áŠ­á‰µ ááŒ áˆ­
          if [ "$LANGUAGE" = "am" ]; then
            MESSAGE="ğŸš€ *Profit Master Supreme - áˆµáˆ« á‰°áŒ áŠ“á‰‹áˆ!*
            
ğŸ“ *áˆ­á‹•áˆµ:* $CONTENT_TOPIC
ğŸŒ *á‰‹áŠ•á‰‹:* áŠ áˆ›áˆ­áŠ›
ğŸ†” *Session:* $SESSION_ID
ğŸ“Š *áˆáŠ”á‰³:* ${{ job.status }}

ğŸ”— *á‹²áˆ½á‰¦áˆ­á‹µ:* https://${{ github.repository_owner }}.github.io/${{ github.event.repository.name }}/
ğŸ“‹ *áˆµáˆ« áˆ›á‹¨á‰µ:* $RUN_URL

ğŸ“ *á‹¨á‰°áˆáŒ áˆ© á‹á‹­áˆá‰½:*
â€¢ index.html - á‹‹áŠ“ á‹²áˆ½á‰¦áˆ­á‹µ
â€¢ articles/ - á‹¨á‰°áˆáŒ áˆ¨ á‹­á‹˜á‰µ

ğŸ’° *á‹¨áŒˆá‰¢ áŒáˆá‰µ:* \$500-800 á‰ áŠ áŠ•á‹µ á•áˆ®áŒ€áŠ­á‰µ

â° *á‰€áŒ£á‹­ áˆµáˆ«:* á‰ 6 áˆ°á‹“á‰³á‰µ á‹áˆµáŒ¥

_á‹­áˆ… áˆ˜áˆá‹•áŠ­á‰µ á‰ áˆ«áˆµ-áˆ°áˆ­ á‰°áˆáŠ³áˆ_"
          else
            MESSAGE="ğŸš€ *Profit Master Supreme - Job Completed!*
            
ğŸ“ *Topic:* $CONTENT_TOPIC
ğŸŒ *Language:* English
ğŸ†” *Session:* $SESSION_ID
ğŸ“Š *Status:* ${{ job.status }}

ğŸ”— *Dashboard:* https://${{ github.repository_owner }}.github.io/${{ github.event.repository.name }}/
ğŸ“‹ *View Run:* $RUN_URL

ğŸ“ *Generated Files:*
â€¢ index.html - Main dashboard
â€¢ articles/ - Generated content

ğŸ’° *Revenue Estimate:* \$500-800 per project

â° *Next Run:* In 6 hours

_This message was sent automatically_"
          fi
          
          # á‹¨cURL á‰ áˆ˜áŒ á‰€áˆ á‰´áˆŒáŒáˆ«áˆ áˆ‹áŠ­
          if [ -n "$TELEGRAM_BOT_TOKEN" ] && [ -n "$TELEGRAM_CHAT_ID" ]; then
            echo "Sending Telegram message..."
            
            curl -s -X POST "https://api.telegram.org/bot${TELEGRAM_BOT_TOKEN}/sendMessage" \
              -d chat_id="${TELEGRAM_CHAT_ID}" \
              -d text="${MESSAGE}" \
              -d parse_mode="Markdown" \
              -d disable_web_page_preview="false"
            
            echo ""
            echo "âœ… Telegram notification sent!"
          else
            echo "â„¹ï¸ Telegram credentials not found. Skipping notification."
            echo "To enable Telegram notifications, add TELEGRAM_BOT_TOKEN and TELEGRAM_CHAT_ID to GitHub Secrets"
          fi
          
      - name: "ğŸ“§ á‹¨áˆ›áˆ³á‹ˆá‰‚á‹« áˆªá–áˆ­á‰µ"
        run: |
          echo "ğŸ“‹ Notification Report" > notification_report.txt
          echo "=====================" >> notification_report.txt
          echo "Time: $(date)" >> notification_report.txt
          echo "Session: ${{ needs.setup.outputs.session_id }}" >> notification_report.txt
          echo "Telegram Status: ${{ secrets.TELEGRAM_BOT_TOKEN && 'Sent' || 'Skipped' }}" >> notification_report.txt
          echo "Dashboard: https://${{ github.repository_owner }}.github.io/${{ github.event.repository.name }}/" >> notification_report.txt
          
          cat notification_report.txt

  # ==================== áˆµáˆ« 5: á‹¨áˆ˜áŒ¨áˆ¨áˆ» áˆªá–áˆ­á‰µ ====================
  final_summary:
    needs: [setup, run_python_script, deploy_to_github_pages, send_telegram_notification]
    runs-on: ubuntu-latest
    name: "ğŸ“Š á‹¨áˆ˜áŒ¨áˆ¨áˆ» áˆ›áŒ á‰ƒáˆˆá‹«"
    if: always()
    
    steps:
      - name: "ğŸ áˆµáˆ« áˆ›áŒ á‰ƒáˆˆá‹«"
        run: |
          echo "==========================================="
          echo "ğŸš€ PROFIT MASTER SUPREME v15.3 - áˆµáˆ« áˆªá–áˆ­á‰µ"
          echo "==========================================="
          echo ""
          echo "ğŸ“Š á‹¨áŠ áˆáƒá€áˆ áˆ›áŒ á‰ƒáˆˆá‹«:"
          echo "   âœ… áˆµáˆ­á‹“á‰µ áˆ˜áŒ€áˆ˜áˆ­ - á‰°áŒ áŠ“á‰‹áˆ"
          echo "   âœ… Python áˆµáŠ­áˆªá•á‰µ áˆ›áˆµáŠ¬á‹µ - á‰°áŒ áŠ“á‰‹áˆ"
          echo "   âœ… GitHub Pages áˆ›áˆµá‰°á‹‹á‹ˆá‰… - á‰°áŒ áŠ“á‰‹áˆ"
          echo "   âœ… Telegram áˆ›áˆ³á‹ˆá‰‚á‹« - ${{ secrets.TELEGRAM_BOT_TOKEN && 'á‰°áˆáŠ³áˆ' || 'á‰°á‹˜áŒá‰·áˆ' }}"
          echo ""
          echo "ğŸŒ á‹¨á‹áŒ¤á‰µ áŠ áŒˆáŠ“áŠá‰½:"
          echo "   Dashboard: https://${{ github.repository_owner }}.github.io/${{ github.event.repository.name }}/"
          echo "   Content: https://${{ github.repository_owner }}.github.io/${{ github.event.repository.name }}/articles/"
          echo "   Run Details: ${{ needs.setup.outputs.run_url }}"
          echo ""
          echo "ğŸ’° á‹¨áŒˆá‰¢ áŒáˆá‰¶á‰½:"
          echo "   Per Content Package: \$500-800"
          echo "   Monthly (3 packages): \$1,500-2,400"
          echo "   Yearly (36 packages): \$18,000-28,800"
          echo ""
          echo "âš™ï¸ á‹¨áˆµáˆ­á‹“á‰µ áˆ˜áˆ¨áŒƒ:"
          echo "   Version: 15.3"
          echo "   Session: ${{ needs.setup.outputs.session_id }}"
          echo "   Repository: ${{ github.repository }}"
          echo "   Trigger: ${{ github.event_name }}"
          echo ""
          echo "â° á‰€áŒ£á‹­ áŠ¥á‰…á‹¶á‰½:"
          echo "   Next Auto-Run: In 6 hours"
          echo "   Maintenance: Daily at 00:00 UTC"
          echo "   Updates: Automatic on code changes"
          echo ""
          echo "==========================================="
          echo "ğŸ‰ Profit Master Supreme is running successfully!"
          echo "==========================================="
          
      - name: "ğŸ“ á‹¨áˆ˜áŒ¨áˆ¨áˆ» áŠ áˆ­á‰²á‹áŠ­á‰¶á‰½ áˆ›áˆµáŒˆá‰£á‰µ"
        uses: actions/upload-artifact@v4
        with:
          name: final-summary-${{ needs.setup.outputs.session_id }}
          path: |
            notification_report.txt
            reports/
          retention-days: 90
