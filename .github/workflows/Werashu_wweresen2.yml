name: ğŸš€ Profit Master Supreme - MEGA 3500+ AUTOMATION

on:
  schedule:
    - cron: '0 */6 * * *' # á‰ á‹¨ 6 áˆ°á‹“á‰± áŠ á‹á‰¶áˆ›á‰²áŠ­ á‹­áˆ°áˆ«áˆ
  workflow_dispatch:
    inputs:
      topic:
        description: 'á‹¨á‹­á‹˜á‰µ áˆ­á‹•áˆµ (Topic)'
        required: false
        default: 'High-Ticket Affiliate Marketing Strategies 2026'
      language:
        description: 'á‰‹áŠ•á‰‹ (am/en)'
        required: false
        default: 'en'

permissions:
  contents: write

jobs:
  run_profit_master:
    name: "ğŸš€ Run Mega Profit Machine"
    runs-on: ubuntu-latest
    
    steps:
      - name: "ğŸ“¥ Checkout Repository"
        uses: actions/checkout@v4

      - name: "ğŸ Setup Python 3.12"
        uses: actions/setup-python@v5
        with:
          python-version: '3.12'
          cache: 'pip'

      - name: "ğŸ”§ Install System Dependencies"
        run: |
          sudo apt-get update
          sudo apt-get install -y ffmpeg

      - name: "ğŸ“¦ Install ALL Python Libraries (Full Set)"
        run: |
          python -m pip install --upgrade pip
          pip install \
            aiohttp httpx requests pandas numpy schedule \
            groq google-generativeai openai anthropic cohere \
            gtts "moviepy>=2.0.0" yt-dlp Pillow \
            beautifulsoup4 selenium tweepy \
            sqlalchemy redis fastapi uvicorn psutil \
            nltk spacy textblob "pydantic>=2.0" tenacity prometheus-client boto3 \
            deep-translator transformers
          
          # NLTK Data download (áˆ˜á‰†áˆ«áˆ¨áŒ¥ áŠ¥áŠ•á‹³á‹­áˆáŒ áˆ­)
          python -m nltk.downloader punkt stopwords wordnet averaged_perceptron_tagger_eng

      - name: "ğŸ¤– Execute Mega-Production Engine"
        env:
          # ğŸ”‘ á‹‹áŠ“ á‰áˆáá‰½
          GROQ_API_KEY: ${{ secrets.GROQ_API_KEY }}
          GEMINI_API_KEY: ${{ secrets.GEMINI_API_KEY }}
          OPENAI_API_KEY: ${{ secrets.OPENAI_API_KEY }}
          DEEPSEEK_API_KEY: ${{ secrets.DEEPSEEK_API_KEY }}
          
          # ğŸ”„ á‹¨áŒáˆ®á‰… á‰áˆáá‰½ áˆ½áŠ­áˆ­áŠ­áˆªá‰µ (Titan v4.6 áŠ¥áŠ•á‹²áˆ°áˆ« áŠ¥áŠá‹šáˆ… á‹¨áŒá‹µ á‹«áˆµáˆáˆáŒ‹áˆ‰)
          GROQ_API_KEY_1: ${{ secrets.GROQ_API_KEY_1 }}
          GROQ_API_KEY_2: ${{ secrets.GROQ_API_KEY_2 }}
          GROQ_API_KEY_3: ${{ secrets.GROQ_API_KEY_3 }}
          GROQ_API_KEY_4: ${{ secrets.GROQ_API_KEY_4 }}
          GROQ_API_KEY_5: ${{ secrets.GROQ_API_KEY_5 }}
          GROQ_API_KEY_6: ${{ secrets.GROQ_API_KEY_6 }}
          GROQ_API_KEY_7: ${{ secrets.GROQ_API_KEY_7 }}
          
          # âš™ï¸ áˆ²áˆµá‰°áˆ áŠ®áŠ•áŠáŒ
          GITHUB_ACTIONS: "true"
          INPUT_TOPIC: ${{ github.event.inputs.topic || 'High-Ticket Affiliate Marketing Strategies 2026' }}
          INPUT_LANGUAGE: ${{ github.event.inputs.language || 'en' }}
          PYTHONUNBUFFERED: 1
        run: |
          echo "ğŸš€ Starting automated Mega-Production (11 Countries x 3500+ Words)..."
          echo "ğŸ”„ Multi-Key Environment Active..."
          
          # '10' á‹¨áˆšáˆˆá‹ á‰áŒ¥áˆ­ á‰ á‰€áŒ¥á‰³ á‹ˆá‹° áˆœáŒ‹-áˆµá‰µáˆ«á‰´áŒ‚á‹ áŠ¥áŠ•á‹²áŒˆá‰£ á‹«á‹°áˆ­áŒˆá‹‹áˆ
          if [ -f "enterprise_production_runner.py" ]; then
             echo "10" | python enterprise_production_runner.py
          elif [ -f "main.py" ]; then
             echo "10" | python main.py
          else
             echo "âŒ Error: Required script not found!"
             ls -R
             exit 1
          fi

      - name: "ğŸ’¾ Commit & Push Results (Bulletproof Version)"
        if: always()
        run: |
          git config --local user.email "actions@github.com"
          git config --local user.name "GitHub Action"
          
          # á‹á‹­áˆá‰½áŠ• áˆˆáˆ˜áŒ¨áˆ˜áˆ­
          git add outputs/ logs/ || true
          
          # áˆˆá‹áŒ¥ áˆ˜áŠ–áˆ©áŠ• áˆ›áˆ¨áŒ‹áŒˆáŒ¥
          if git diff --quiet && git diff --staged --quiet; then
            echo "No changes to commit"
          else
            git commit -m "ğŸš€ Mega Content Update [Sovereign Grade: 5000+ words]"
            
            # áˆµáˆ…á‰°á‰µ áŠ¥áŠ•á‹³á‹­áˆáŒ áˆ­ áˆ˜áŒ€áˆ˜áˆªá‹« á‹¨á‰…áˆ­á‰¥ áŒŠá‹œá‹áŠ• áˆˆá‹áŒ¥ á‹­áˆµá‰£áˆ (Pull with Rebase)
            git pull --rebase origin main
            
            # áŠ¨á‹šá‹«áˆ á‹­áŒˆá‹á‹‹áˆ (Push)
            git push origin main
          fi
