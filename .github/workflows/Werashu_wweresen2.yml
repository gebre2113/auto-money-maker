name: ğŸš€ Profit Master Supreme - MEGA 3500+ AUTOMATION

on:
  schedule:
    - cron: '0 */6 * * *' # á‰ á‹¨ 6 áˆ°á‹“á‰± áŠ á‹á‰¶áˆ›á‰²áŠ­ á‹­áˆ°áˆ«áˆ
  workflow_dispatch:
    inputs:
      topic:
        description: 'á‹¨á‹­á‹˜á‰µ áˆ­á‹•áˆµ (Topic)'
        required: false
        default: 'High-Ticket Affiliate Marketing Strategies 2026'
      language:
        description: 'á‰‹áŠ•á‰‹ (am/en)'
        required: false
        default: 'en'

permissions:
  contents: write

jobs:
  run_profit_master:
    name: "ğŸš€ Run Mega Profit Machine"
    runs-on: ubuntu-latest
    
    steps:
      - name: "ğŸ“¥ Checkout Repository"
        uses: actions/checkout@v4

      - name: "ğŸ Setup Python 3.12"
        uses: actions/setup-python@v5
        with:
          python-version: '3.12'
          cache: 'pip'

      - name: "ğŸ”§ Install System Dependencies"
        run: |
          sudo apt-get update
          sudo apt-get install -y ffmpeg

      - name: "ğŸ“¦ Install ALL Python Libraries (Full Set)"
        run: |
          python -m pip install --upgrade pip
          pip install \
            aiohttp httpx requests pandas numpy schedule \
            groq google-generativeai openai anthropic cohere \
            gtts "moviepy>=2.0.0" yt-dlp Pillow \
            beautifulsoup4 selenium tweepy \
            sqlalchemy redis fastapi uvicorn psutil \
            nltk spacy textblob "pydantic>=2.0" tenacity prometheus-client boto3 \
            deep-translator transformers
          
          # NLTK Data download (áˆ˜á‰†áˆ«áˆ¨áŒ¥ áŠ¥áŠ•á‹³á‹­áˆáŒ áˆ­)
          python -m nltk.downloader punkt stopwords wordnet averaged_perceptron_tagger_eng

      - name: "ğŸ¤– Execute Mega-Production Engine"
        env:
          GROQ_API_KEY: ${{ secrets.GROQ_API_KEY }}
          GEMINI_API_KEY: ${{ secrets.GEMINI_API_KEY }}
          OPENAI_API_KEY: ${{ secrets.OPENAI_API_KEY }}
          GITHUB_ACTIONS: "true"
          INPUT_TOPIC: ${{ github.event.inputs.topic || 'High-Ticket Affiliate Marketing Strategies 2026' }}
          INPUT_LANGUAGE: ${{ github.event.inputs.language || 'en' }}
          PYTHONUNBUFFERED: 1
        run: |
          echo "ğŸš€ Starting automated Mega-Production (11 Countries x 3500+ Words)..."
          
          # '10' á‹¨áˆšáˆˆá‹ á‰áŒ¥áˆ­ á‰ á‰€áŒ¥á‰³ á‹ˆá‹° áˆœáŒ‹-áˆµá‰µáˆ«á‰´áŒ‚á‹ áŠ¥áŠ•á‹²áŒˆá‰£ á‹«á‹°áˆ­áŒˆá‹‹áˆ
          if [ -f "enterprise_production_runner.py" ]; then
             echo "10" | python enterprise_production_runner.py
          elif [ -f "main.py" ]; then
             echo "10" | python main.py
          else
             echo "âŒ Error: Required script not found!"
             ls -R
             exit 1
          fi

      - name: "ğŸ’¾ Commit & Push Results"
        if: always()
        run: |
          git config --local user.email "actions@github.com"
          git config --local user.name "GitHub Action"
          git add outputs/ logs/ || true
          git commit -m "ğŸš€ Mega Content Update [3500+ words per country]" || echo "No changes to commit"
          git push
